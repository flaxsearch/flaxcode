Flax
----

Flax is web based search system.

At the moment we are at the prototyping stage. Feel free to
experiment, but the software is not even close to being ready for
production use.

Full documentation will be produced at some point. In the mean time
you have this file, the source, and whatever you can find on
http://flaxcode.googlecode.com.

Dependencies:
-------------

You need the following:

Python at at least version 2.5 with the following packages installed:

- xapian with its python bindings (see http://www.xapian.org),
  currently you need the subversion trunk.

- CherryPy - see http://www.cherrypy.org (cherrypy 3 is needed.)

- routes - see http://routes.groovie.org/ 

- HTMLTemplate - see http://freespace.virgin.net/hamish.sanderson/htmltemplate.html


Note also that xappy (formerly secore), is grabbed as an external when
you check out Flax from subversion, so if you're reading this file you
presumably already have it, but at some point in the future this might
be separated completely from Flax so will need independent
installation. See http://xappy.googlecode.com.


Platforms.
----------

At the moment Flax should on run any system where you can install all
the dependencies. The first release will probably only work fully on
Windows as we plan to use ifilters to get content from documents.  The
plan is for full functionality across at least windows/linux/mac in
the long run.


For the first release we will make a nice installer, in the mean time
check the code out from subversion (presumably you already have if
you're reading this) with e.g. ::

  svn checkout http://flaxcode.googlecode.com/svn/trunk/ flaxcode

then::

  cd flaxcode/src

then::

  python cpserver.py

Which will start the web server. By default the server will run on
port 8090, but you can change that by editing cp.conf.

Administration functionality is available at
http://localhost:8090/admin

The web server will by default read its state from a file called
flax.flx, and on termination save its state to that file. The files
can be changed with command line options, invoke with --help for more
details.

Note that if the input file cannot be read for some reason (e.g. it's
not present or the data is corrupted) then the system will start with
some default settings.


Indexing of documents is done by a separate indexer, (which can be
invoked from the web administration interface).

In order to start the indexer first start the pyro name server. See
the pyro docs for how to do this on your platform. On linux invoke
pyro-ns. On windows invoke pyro-ns.cmd which is installed in
<python>\Scripts, where <python> is the installed python directory.

Once the pyro nameserver is started then do::

  python indexserver.py

To test that the indexer is working click on the "index now" button
from a document collection detail page in the web app and you should
see some diagnostic information being printed by the indexserver.

(At the moment the web server invokes the indexer synchronously to aid
debugging, so you might have to wait for a while if you have a lot of
documents. But in released versions this will be asynchronous.)



Changing look and feel
----------------------

It is intended that Flax will be customizable. You can change the
templates in flaxcode/src/templates (restart the web server for
changes to take effect). Note however that removing the HTMLTemplate
containers or repeaters will probably break things.  The only style
sheet currently used is in flaxcode/src/static/css/main.css.


Documentation
-------------

The docstrings can be used to generate some api documentation. Use::

   epydoc -v --config epydoc.conf

and then look in the html subdirectory. Epydoc at at least version 3
is needed, and since the doctrings are in restructured text format you
also need docutils installed.



