Thu Sep 27 13:53:32 BST 2007  Richard Boulton <richard@lemurconsulting.com>

	* ChangeLog: Update.

Thu Sep 27 11:16:45 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py: changed references to filter_settings to filters
	  Made a start on consistent error handling by subclassing from a
	  new class that provide methods for dealing with some error
	  situations.

Thu Sep 27 10:19:46 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py: Changed the error response for add.

Thu Sep 27 08:51:22 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* README: Added some notes about persistence.

Thu Sep 27 08:41:13 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py: Added command line options to load/save data.

Thu Sep 27 08:40:10 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/persist.py: Very simple persistence mechanism user the
	  standard shelve/pickle modules.

Thu Sep 27 08:39:19 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/flax.py: Got rid of the globals (except for options) and
	  moved the intialization of a fresh options object to a function.

Thu Sep 27 08:37:59 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/flax_collections.py: Used the collection update method,
	  rather than updating it's __dict__. Remove the .lower() prior to
	  parsing a query string.

Thu Sep 27 08:35:30 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/filespec.py: Ensured that paths is set to a  list when
	  inititialised as None.

Thu Sep 27 06:02:17 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py: removed unused local in main()

Wed Sep 26 14:08:32 UTC 2007  Tom Mortimer <tom@lemurconsulting.com>

	* src/flax_collections.py: added collection_names property
	* src/cpserver.py: search method now treats col = None as "search all"
	* src/templates.py: template handles col = None

Wed Sep 26 13:19:36 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/indexer.py: In Indexer.stale: used the first mtime field
	  rather than the list of them to get the document indexing time.

Wed Sep 26 13:03:17 UTC 2007  Tom Mortimer <tom@lemurconsulting.com>

	* tests,tests/sampledocs,tests/sampledocs/Changes.txt: added a test
	  document

Wed Sep 26 12:06:28 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Provided for serving source files for
	  documents. Documents include a "collection" field, and this
	  togther with the document id is used to verify that the file is
	  one that was actually indexed at some point. This provides a form
	  of security (so that we're not serving arbitrary files, but we
	  need to think harder about whether this provides a loophole
	  allowing any files from the server to be downloaded). (this file
	  inadvertently ommitted from last checkin.)

Wed Sep 26 12:05:13 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py,src/dbspec.py,src/doc_collection.py,
	  src/indexer.py: Provided for serving source files for documents.
	  Documents include a "collection" field, and this togther with the
	  document id is used to verify that the file is one that was
	  actually indexed at some point. This provides a form of security
	  (so that we're not serving arbitrary files, but we need to think
	  harder about whether this provides a loophole allowing any files
	  from the server to be downloaded).

Wed Sep 26 11:04:33 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Took out the high maxlen arg to summarize when
	  rendering search results.

Wed Sep 26 11:03:25 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/indexer.py: Added a comment about the modification date
	  testing.

Wed Sep 26 09:58:30 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* README: Added some notes about starting the indexserver.

Wed Sep 26 07:47:46 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/dbspec.py,src/indexer.py: Added fields actions for "standard"
	  fields at db creation time. Used filename as document id, used
	  replace rather than add to put documents into the db. Changed the
	  indexer to check whether a file has changed and only filter when
	  this is so. Added the indexing time to the document to facilitate
	  this.

Wed Sep 26 04:49:54 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* LICENSE,src/filterDemo.py: Removed the filterDemo.py (which was
	  from the windows python extentions distribution). Updated the
	  LICENSE file to note the some code is based on that file.

Tue Sep 25 06:24:34 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Checked that there is some 'content' keyed data
	  before we try to use it.

Tue Sep 25 06:22:11 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/indexer.py,src/indexserver.py: Split out the remoting stuff
	  from the indexing stuff for the indexserver.

Tue Sep 25 06:15:53 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/simple_text_filter.py: Changed the field for the main content
	  to be consistent with the filter spec.

Tue Sep 25 04:45:23 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py,src/dbspec.py,src/doc_collection.py,
	  src/filterDemo.py,src/flax.py,src/flax_collections.py,
	  src/templates/search_result.html,src/templates.py: Moved the code
	  for rendering search resaults out of the web server and into the
	  template code. Moved the code for invoking the search out of the
	  web server and into the collections.

Mon Sep 24 13:44:04 BST 2007  Richard Boulton <richard@lemurconsulting.com>

	* src/dbspec.py: Add "import xappy" line, and make database
	  directory (and parents) if it doesn't already exist.
	* ChangeLog: Update.

Mon Sep 24 10:12:10 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/util.py,src/w32com_ifilter.py: Split gen_until_exception out
	  into util. Changed it to take an iterator (it's more useful that
	  way).

	  Added code to deal with structured storage, again based on the
	  w32com filter demo, and emmited blocks for fields for summary
	  information based where it's available.

Sun Sep 23 05:59:16 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/dbspec.py,src/doc_collection.py,src/indexspec.py,
	  src/w32com_ifilter.py: Renaming for better correspondence between
	  name and purpose.

Sun Sep 23 05:58:18 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/indexer.py: Split a line for better readability.

Sat Sep 22 05:37:24 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/w32com_ifilter.py: Added a call to pythoncom.CoInitialize so
	  that the filter can run happily in any thread.

Thu Sep 20 12:01:58 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py,src/filespec.py,
	  src/templates/collection_detail.html,src/templates.py,
	  src/util.py: Getting the date/time related parts of a filespec to
	  function, and provided for setting them through the UI.

Wed Sep 19 08:26:20 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/collection_detail.html: commented out the yui stuff
	  as it's not currently used.

Wed Sep 19 07:40:31 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/: Refactored to (hopefully) de-spaghetti a bit.

	  Made a start on indexing options for collections.

Tue Sep 18 13:05:31 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/indexer.py: Addd some docstrings; renamed methods to make
	  intended public interface clear; renamed a method param to be
	  consistent with invocation.

Tue Sep 18 12:39:09 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/indexer.py: Avoided using a list for the fields property of
	  unprocessed document. fields can be any iterator so we just
	  starmap xappy.Field over the filter.

Tue Sep 18 11:18:01 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py,src/flax.py,src/indexer.py: Allowed for passing
	  format->filter mapping to the indexer.

	  Made the call to the indexer one way.

Tue Sep 18 11:16:55 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/w32com_ifilter.py: added start fields to filter.

Tue Sep 18 06:54:35 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/simple_text_filter.py: Simple filter that breaks text files
	  into paragraphs.

Mon Sep 17 15:36:55 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py,src/indexer.py,src/util.py: Added psyco
	  invocation to web server and indexer.

Mon Sep 17 15:18:30 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* README,src/README: Moved README to top level directory.

Mon Sep 17 13:09:40 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py,src/templates.py: Used global formats setting for
	  rendering of the collection detail templates.

Mon Sep 17 13:02:49 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py: removed a diagnostic print

Mon Sep 17 13:01:53 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py,src/cpserver.py,src/flax.py,src/indexer.py,
	  src/templates/options.html,src/templates.py: Pulled most of the
	  global data into a single objects and modified the global options
	  rendering and processing to deal with this object.

	  Added initial code for the indexer.

Mon Sep 17 10:51:01 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/util.py: General flax utilities.

	  Added a function to set up sys.path to find xappy.

Mon Sep 17 10:49:43 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py,src/cpserver.py: Pulled the indexing stuff out
	  of the collection and put it in a new class intended to be called
	  remotely.

	  Added the necessary Pyro invocations for the remoting.

Mon Sep 17 10:48:19 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Added rendering for format/filter options.

Mon Sep 17 10:47:01 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/README: Noted dependency on docutils for auto-generated api
	  docs.

Mon Sep 17 10:44:32 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/options.html: Added a section for specifying how a
	  format maps to a filter.

Thu Sep 13 11:04:22 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/w32com_ifilter.py: refactored to get rid of duplication.

Thu Sep 13 10:28:25 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/w32com_ifilter.py: A simple filter that uses LoadIFilter to
	  get make a filter for a file and then returns a generator that
	  yeield annotated chunks of text from the file.

Wed Sep 12 15:43:21 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* LICENSE: Licensing.

Wed Sep 12 15:08:40 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/filterDemo.py: Changed "reduce(operator.add..." to sum - the
	  former errors with no initial value if the list is empty.

Wed Sep 12 15:05:27 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/filterDemo.py: This is the original version of the
	  ifilterDemo from the python windows extension (which doesn't work
	  for me at the moment).

	  Snapshotting the original.

Tue Sep 11 09:38:38 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Added docstrings.

Mon Sep 10 10:45:47 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/README,src/cpserver.py,src/epydoc.conf: Added restructured
	  text docstrings to code in cpserver, together with a
	  configuration file for epydoc to generator api documentation from
	  these. Added a note to the REDAME about this.

	  Refectored Admin and Top to get rid of some duplication.

	  Pulled the startup stuff into a separate function.

Mon Sep 10 10:43:14 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/options.html: Changed the help text to include a
	  warning about potentially generating lots of logging data.

Sun Sep 09 06:03:12 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py: Made indentation consistent.

	  Moved all template references to the start up code, controllers
	  now take all their templates as initialization arguments.

	  Pulled creation of controllers out of the setup_routes.

Sat Sep 08 07:46:01 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py,src/cpserver.py,src/static/css/main.css,
	  src/templates/admin_banner.html,
	  src/templates/advanced_search.html,
	  src/templates/collection_detail.html,src/templates/flax.html,
	  src/templates/options.html,src/templates/search.html,
	  src/templates.py: Added an advanced search form.

	  Added a section on logging options to the global options page.

Sat Sep 08 04:14:28 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/README: Spelling.

Fri Sep 07 17:13:39 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/README: Some basic information about Flax.

Fri Sep 07 12:55:20 UTC 2007  Richard Boulton <richard@lemurconsulting.com>

	* src: Add *.pyc to ignores.

Fri Sep 07 07:59:04 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py,src/templates/collections.html,
	  src/templates/search_result.html,src/templates.py: Sensible
	  redirection after actions on collections.

	  Changed some variable names to avoid slight nastiness with extra
	  keyword args arriving from the framework.

Thu Sep 06 17:56:22 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src, src/collection.py, src/cpserver.py, src/templates: Ignores
	  for semantic.cache.

	  Reflect secore -> xappy change.

	  Mininal indexing and searching capability to investigate proper
	  search result formatting.

Thu Sep 06 17:50:01 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/filespec.py: Changes to support prototyping, ignore the date-
	  related specifications, and get the format matching to work.

Thu Sep 06 17:47:33 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Added an optional results arg for the search
	  results template renderer.

Thu Sep 06 17:46:41 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/search_result.html: Added a place-holder for actual
	  search results.

Thu Sep 06 10:23:17 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py, src/cpserver.py,
	  src/templates/collection_detail.html,
	  src/templates/collections.html, src/templates.py: Refactored the
	  cherrypy server to use the cherrypy server routes dispatcher.
	  Also some minor changes to the templates, to support new urls.

	  Made a start on experimenting with some search functionality.
	  This isn't intended to be in the final form this will take. I
	  just want a prototype in order to play with the rendering of
	  search results.

Wed Sep 05 10:22:14 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/test/testfilespec.py: reinstated code inadvertenly removed
	  during rename.

Wed Sep 05 08:30:44 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cp.conf: basic authentication for admin pages.

Wed Sep 05 05:41:48 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cpserver.py, src/templates/collections.html: Ensured that the
	  redirect on posting to the collections list works.

Wed Sep 05 05:17:48 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/cp.conf, src/cpserver.py: First pass at using cherrypy as the
	  web server.

Wed Sep 05 05:16:26 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Changed the url for the individual collection
	  links from the collections list page.

Wed Sep 05 03:43:43 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/filespec.py: various changes, to at least get the iterator to
	  work.

Wed Sep 05 03:42:59 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/collection_detail.html, src/templates/flax.html,
	  src/templates.py: Allowed for templates to insert different stuff
	  in the common document head.

Wed Sep 05 03:40:12 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/test/filespec.py, src/test/testfilespec.py: renaming

Mon Sep 03 07:07:15 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/static/, src/templates/admin_banner.html,
	  src/templates/collection_detail.html,
	  src/templates/collections.html, src/templates/flax.html,
	  src/templates/options.html, src/templates/search.html,
	  src/templates.py, src/tw2server.py: various additions and layout
	  improvements.

Mon Sep 03 06:40:22 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/filespec.py: A class for specifying the set of files of a
	  document collection.

Mon Sep 03 06:39:20 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/test, src/test/filespec.py: tests directory

Mon Sep 03 06:37:13 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/static/js/yui/README, src/static/js/yui/assets,
	  src/static/js/yui/build, src/static/js/yui/docs,
	  src/static/js/yui/examples, src/static/js/yui/index.html,
	  src/static/js/yui/tests: added yui for the calendar controls

Mon Sep 03 06:36:10 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/static/js, src/static/js/yui: added yui for the calendar
	  controls

Mon Sep 03 06:18:46 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/static/css/main.css: layout improvements for forms

Fri Aug 24 13:40:22 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py, src/templates/collection_detail.html,
	  src/templates/search.html, src/templates.py, src/tw2server.py:
	  Made collections more like a dictionary.

	  Cosmetic layout changes in the html.

Thu Aug 23 06:31:26 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/, src/templates/admin_banner.html,
	  src/templates/admin_search.html,
	  src/templates/admin_search_result.html,
	  src/templates/search.html, src/templates/search_result.html,
	  src/templates/user_banner.html, src/templates.py,
	  src/tw2server.py: Templates for users as well as admins. Moved
	  urls around to accommodate.

Wed Aug 22 16:11:28 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/tw2server.py: Allowed for updating collections  by posting to
	  collection detail pages.

Wed Aug 22 16:10:24 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/collection_detail.html: More elements for
	  collection details.

Wed Aug 22 16:09:55 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: More collection detail rendering.

Wed Aug 22 16:09:01 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/static/css/main.css: layout for form labels

Wed Aug 22 16:08:31 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py: added paths and formats

Wed Aug 22 07:11:15 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/admin_search.html, src/templates/collections.html,
	  src/tw2server.py: Creation of new collections implemented

Wed Aug 22 05:56:31 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/tw2server.py: removed a diagnostic print

Tue Aug 21 20:47:15 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/tw2server.py: removed diagnostic prints

Tue Aug 21 20:44:34 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/admin_search.html: tidying

Tue Aug 21 19:42:34 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/admin_banner.html, src/templates/collections.html,
	  src/templates/flax.html, src/templates.py, src/tw2server.py:
	  Added a web server.

	  Made changes to the templates to make the urls link properly
	  (this means that the links between the html files written are not
	  so good, but no real need for those now anyhow).

Tue Aug 21 19:40:38 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/static/css/main.css: minor layout/rendering changes

Tue Aug 21 19:39:56 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py: added more structure to dummy collection type

Tue Aug 21 07:12:39 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: More dummy collection properties

	  render html from command line.

Tue Aug 21 06:08:26 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/collection_detail.html: typo

Mon Aug 20 21:48:52 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/collection.py, src/templates.py: sorted rendering of
	  collection descriptions, provided for arbitrary collection
	  atributes.

Mon Aug 20 21:32:42 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates.py: Added search result template

Mon Aug 20 21:23:06 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/admin_banner.html: corrected comments

Mon Aug 20 17:31:14 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/templates/index.html: minimal index template.

Mon Aug 20 17:30:34 UTC 2007  Paul Rudin <paul@rudin.co.uk>

	* src/, src/collection.py, src/static, src/static/css,
	  src/static/css/main.css, src/static/img/, src/templates/,
	  src/templates.py: Start of some HTMLTemplates and associated
	  rendering code.
